# Global settings for the whole stack
global:
  imagePullPolicy: IfNotPresent
  imageRegistry: ""   # optional; we use full image repo below

# Application metrics configuration
# NOTE: Frontend and model-service are deployed via the main sms-app Helm chart
# This chart only contains monitoring components that scrape those services
appMetrics:
  # ServiceMonitor targets - these should match the services in sms-app namespace
  frontend:
    namespace: sms-app
    serviceName: frontend
    port: 8080
    metricsPath: /actuator/prometheus
  modelService:
    namespace: sms-app
    serviceName: model-service
    port: 8081
    metricsPath: /metrics

prometheus:
  enabled: true
  # details will be added later (deployment/service/servicemonitor)

grafana:
  enabled: true
  # dashboards wired later via ConfigMap

# Common labels used for ServiceMonitor matching
monitoring:
  enabled: true
  scrapeInterval: 15s
  labels:
    release: app-stack

# Alerting configuration
alerting:
  enabled: true
  # Webhook receiver (easiest to test - no SMTP needed!)
  webhook:
    enabled: true
    # Use a webhook testing service like https://webhook.site or your own endpoint
    url: "https://webhook.site/your-unique-id"  # UPDATE THIS - get a unique URL from webhook.site
    # Or use a simple HTTP endpoint that logs alerts
    # url: "http://your-logging-service:8080/alerts"
  
  # Email receiver (optional - requires SMTP setup)
  email:
    enabled: false  # Set to true if you want email alerts
    # Email recipient for alerts
    to: "dev-team@example.com"  # UPDATE THIS with your email
    # SMTP configuration - these values should be provided via --set or from a Secret
    # DO NOT commit real credentials to git!
    smtpFrom: "alerts@example.com"  # UPDATE THIS
    smtpHost: "smtp.example.com"  # UPDATE THIS (e.g., smtp.gmail.com)
    smtpPort: "587"  # UPDATE THIS (587 for TLS, 465 for SSL)
    smtpAuthUsername: "your-email@example.com"  # UPDATE THIS
    smtpAuthPassword: "your-password"  # UPDATE THIS - use --set or Secret in production!
